<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Seeker Wizard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .wizard-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none; /* Hidden by default */
            align-items: center;
            justify-content: center;
            z-index: 50;
        }
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-100">

    <!-- Job Description Page Content (Background) -->
    <div id="job-description-container" class="container p-8 lg:p-16">
        <h1 class="text-4xl sm:text-5xl font-bold text-gray-800 mb-2">Product Manager</h1>
        <p class="text-lg text-gray-600 mb-6">
            <span class="font-medium text-gray-700">Innovate Inc.</span> &bull; San Francisco, CA
        </p>

        <div class="bg-white rounded-2xl shadow-lg p-6 sm:p-8 lg:p-12">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Job Summary</h2>
            <p id="job-description-text" class="text-gray-700 leading-relaxed mb-6">
                We are looking for a passionate and experienced Product Manager to join our team in San Francisco. In this role, you will be responsible for the full product lifecycle, from ideation to launch and beyond. You will work closely with engineering, design, and marketing teams to build products that delight our customers and drive business growth.
            </p>

            <h2 class="text-2xl font-bold text-gray-800 mb-4">Key Responsibilities</h2>
            <ul class="list-disc list-inside space-y-2 text-gray-700 mb-6">
                <li>Define and articulate the product vision and strategy.</li>
                <li>Conduct market research and competitive analysis.</li>
                <li>Collaborate with cross-functional teams to deliver on the product roadmap.</li>
                <li>Prioritize product features and enhancements.</li>
                <li>Analyze product performance and user feedback.</li>
            </ul>

            <h2 class="text-2xl font-bold text-gray-800 mb-4">Qualifications</h2>
            <ul class="list-disc list-inside space-y-2 text-gray-700 mb-6">
                <li>5+ years of experience in product management.</li>
                <li>Proven track record of managing all aspects of a successful product throughout its lifecycle.</li>
                <li>Strong understanding of agile methodologies.</li>
                <li>Excellent communication and leadership skills.</li>
                <li>Bachelor's degree in a relevant field; MBA is a plus.</li>
            </ul>

            <div class="mt-8 flex justify-center">
                <button id="show-wizard-btn" class="bg-blue-600 text-white font-semibold py-3 px-8 rounded-xl hover:bg-blue-700 transition-colors transform active:scale-95 shadow-md">
                    Apply Now
                </button>
            </div>
        </div>
    </div>

    <!-- Wizard Overlay -->
    <div id="wizard-overlay" class="wizard-overlay">
        <div id="wizard-container" class="relative bg-white rounded-3xl shadow-2xl p-6 sm:p-8 lg:p-12 w-11/12 max-w-2xl">
            <!-- Close Button -->
            <button id="close-wizard-btn" class="absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 transition-colors rounded-full">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            
            <!-- Step 1: Welcome and Resume Upload -->
            <div id="step-1" class="transition-all duration-500 ease-in-out">
                <h1 class="text-3xl sm:text-4xl font-bold text-gray-800 mb-4">Welcome, nice to meet you.</h1>
                <p class="text-lg text-gray-600 mb-8">
                    This **Product Manager** job is a great opportunity, and we would love to have you apply for it. Can you share your resume and let's get started?
                </p>
                <div class="space-y-4">
                    <label for="resume-upload" class="flex flex-col items-center justify-center border-2 border-dashed border-gray-300 rounded-xl p-8 cursor-pointer hover:bg-gray-50 transition-colors">
                        <svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path>
                        </svg>
                        <p class="mt-2 text-sm text-gray-500">Drag & drop your resume or click to upload</p>
                        <input id="resume-upload" type="file" class="hidden">
                    </label>
                    <button id="next-1" class="w-full bg-blue-600 text-white font-semibold py-3 px-4 rounded-xl hover:bg-blue-700 transition-colors transform active:scale-95">
                        Let's Get Started
                    </button>
                </div>
            </div>

            <!-- Step 2: Compatibility Check & Interview Prep -->
            <div id="step-2" class="hidden transition-all duration-500 ease-in-out">
                <h2 class="text-3xl font-bold text-gray-800 mb-4 flex items-center">
                    <span class="mr-2">Job Compatibility Analysis</span> ✨
                </h2>
                <div id="gemini-content" class="min-h-[100px] flex items-center justify-center p-6 bg-gray-50 rounded-2xl mb-8">
                    <div class="loading-spinner"></div>
                </div>
                <h2 class="text-xl font-bold text-gray-800 mb-2">AI Interview Prep ✨</h2>
                <div id="interview-prep-content" class="min-h-[100px] flex items-center justify-center p-6 bg-gray-50 rounded-2xl">
                     <div class="loading-spinner"></div>
                </div>
                <button id="next-2" class="w-full mt-8 bg-blue-600 text-white font-semibold py-3 px-4 rounded-xl hover:bg-blue-700 transition-colors transform active:scale-95">
                    Next
                </button>
            </div>

            <!-- Step 3: LinkedIn Match -->
            <div id="step-3" class="hidden transition-all duration-500 ease-in-out text-center">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Is this your LinkedIn account?</h2>
                <div class="bg-gray-50 rounded-2xl p-6 mb-8 flex flex-col items-center">
                    <img src="https://placehold.co/100x100/4f46e5/ffffff?text=User" alt="User Profile Picture" class="w-24 h-24 rounded-full mb-4 ring-4 ring-blue-500 ring-opacity-50">
                    <div class="space-y-2">
                        <h3 class="text-xl font-semibold text-gray-800">Johnathan Doe</h3>
                        <p class="text-sm text-gray-500">Sr. Product Manager at Tech Solutions Inc.</p>
                    </div>
                </div>
                <div class="space-y-4">
                    <button id="next-3-yes" class="w-full bg-green-600 text-white font-semibold py-3 px-4 rounded-xl hover:bg-green-700 transition-colors transform active:scale-95">
                        Yes, that's me
                    </button>
                    <button id="next-3-no" class="w-full bg-gray-200 text-gray-800 font-semibold py-3 px-4 rounded-xl hover:bg-gray-300 transition-colors transform active:scale-95">
                        Enter your LinkedIn URL
                    </button>
                    <input id="linkedin-url-input" type="text" placeholder="https://linkedin.com/in/..." class="hidden w-full px-4 py-3 rounded-xl border-2 border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
            </div>

            <!-- Step 4: Mandatory Questions -->
            <div id="step-4" class="hidden transition-all duration-500 ease-in-out">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">You were spot on, this is a great match for you.</h2>
                <p class="text-lg text-gray-600 mb-8">Before we continue, we need to ask a few mandatory questions.</p>
                
                <div class="space-y-6">
                    <div>
                        <p class="text-base font-medium text-gray-700 mb-2">Are you a veteran?</p>
                        <div class="flex items-center space-x-4">
                            <label class="inline-flex items-center">
                                <input type="radio" name="veteran" value="yes" class="form-radio text-blue-600 focus:ring-blue-500">
                                <span class="ml-2 text-gray-700">Yes</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="veteran" value="no" class="form-radio text-blue-600 focus:ring-blue-500">
                                <span class="ml-2 text-gray-700">No</span>
                            </label>
                        </div>
                    </div>

                    <div>
                        <p class="text-base font-medium text-gray-700 mb-2">Are you a protected individual?</p>
                        <div class="flex items-center space-x-4">
                            <label class="inline-flex items-center">
                                <input type="radio" name="protected" value="yes" class="form-radio text-blue-600 focus:ring-blue-500">
                                <span class="ml-2 text-gray-700">Yes</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="protected" value="no" class="form-radio text-blue-600 focus:ring-blue-500">
                                <span class="ml-2 text-gray-700">No</span>
                            </label>
                        </div>
                    </div>
                </div>
                <button id="next-4" class="w-full mt-8 bg-blue-600 text-white font-semibold py-3 px-4 rounded-xl hover:bg-blue-700 transition-colors transform active:scale-95">
                    Done
                </button>
            </div>

            <!-- Step 5: Benefits, Reviews, Articles and Final Submit -->
            <div id="step-5" class="hidden transition-all duration-500 ease-in-out">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">We value our employees by having the best benefits. Check it out.</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <!-- Benefits Card -->
                    <div class="bg-gray-50 rounded-2xl p-6 shadow-sm">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                            <svg class="w-6 h-6 text-blue-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c1.657 0 3 1.343 3 3v2a3 3 0 003 3h-1a3 3 0 01-3-3v-2a3 3 0 013-3h1zM4 12a8 8 0 1016 0A8 8 0 004 12z"></path></svg>
                            Benefits
                        </h3>
                        <ul class="text-gray-600 space-y-2 text-sm">
                            <li><span class="font-medium text-gray-700">Health & Wellness:</span> Medical, dental, vision insurance</li>
                            <li><span class="font-medium text-gray-700">Financial:</span> 401(k) with company match, stock options</li>
                            <li><span class="font-medium text-gray-700">Work-Life:</span> Unlimited PTO, flexible hours</li>
                        </ul>
                    </div>

                    <!-- Glassdoor Card -->
                    <div class="bg-gray-50 rounded-2xl p-6 shadow-sm">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                            <svg class="w-6 h-6 text-green-600 mr-2" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zM12 18.5c-3.59 0-6.5-2.91-6.5-6.5s2.91-6.5 6.5-6.5 6.5 2.91 6.5 6.5-2.91 6.5-6.5 6.5z"></path></svg>
                            Glassdoor Reviews
                        </h3>
                        <div class="flex items-center mb-2">
                            <span class="text-yellow-400 text-2xl">★★★★☆</span>
                            <span class="ml-2 text-sm text-gray-600">4.1 out of 5 stars</span>
                        </div>
                        <p class="text-sm text-gray-700 italic">"Great company culture and fantastic work-life balance. Leadership is very supportive."</p>
                    </div>

                    <!-- Articles Card -->
                    <div class="bg-gray-50 rounded-2xl p-6 shadow-sm">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                            <svg class="w-6 h-6 text-purple-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20v-7a3 3 0 00-3-3H8a3 3 0 00-3 3v7"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 16h.01M16 16h.01M8 16h.01"></path></svg>
                            Company News
                        </h3>
                        <ul class="text-gray-600 space-y-2 text-sm">
                            <li><a href="#" class="text-blue-600 hover:underline">Our new product launch is a huge success!</a></li>
                            <li><a href="#" class="text-blue-600 hover:underline">Expanding our team with new offices in Austin.</a></li>
                            <li><a href="#" class="text-blue-600 hover:underline">Named a 'Best Place to Work' for 3rd year in a row.</a></li>
                        </ul>
                    </div>
                </div>
                <button id="next-5" class="w-full bg-blue-600 text-white font-semibold py-3 px-4 rounded-xl hover:bg-blue-700 transition-colors transform active:scale-95">
                    Submit My Application
                </button>
            </div>

            <!-- Step 6: Final Opt-ins -->
            <div id="step-6" class="hidden transition-all duration-500 ease-in-out">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">You're all set!</h2>
                <p class="text-lg text-gray-600 mb-8">Thank you for your application. You're one step closer to joining our team.</p>
                <p class="font-medium text-gray-800 mb-4">Stay connected with us for future opportunities:</p>
                
                <div class="space-y-4 mb-8">
                    <label class="flex items-center text-gray-700">
                        <input type="checkbox" class="form-checkbox h-5 w-5 text-blue-600 rounded-lg">
                        <span class="ml-2">Sign up for the Talent Community</span>
                    </label>
                    <label class="flex items-center text-gray-700">
                        <input type="checkbox" class="form-checkbox h-5 w-5 text-blue-600 rounded-lg">
                        <span class="ml-2">Get emails for similar jobs</span>
                    </label>
                    <label class="flex items-center text-gray-700">
                        <input type="checkbox" class="form-checkbox h-5 w-5 text-blue-600 rounded-lg">
                        <span class="ml-2">Learn about upcoming events</span>
                    </label>
                </div>
                <button id="next-6" class="w-full bg-gray-200 text-gray-800 font-semibold py-3 px-4 rounded-xl hover:bg-gray-300 transition-colors transform active:scale-95">
                    Finish
                </button>
            </div>

            <!-- Message Box for Alerts -->
            <div id="message-box" class="fixed inset-0 hidden items-center justify-center bg-black bg-opacity-50 z-50">
                <div class="bg-white rounded-lg p-6 max-w-sm mx-auto shadow-lg text-center">
                    <p id="message-text" class="text-lg font-medium text-gray-800 mb-4"></p>
                    <button id="close-message" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">Close</button>
                </div>
            </div>

        </div>
    </div>

    <script>
        // Get all the step elements
        const step1 = document.getElementById('step-1');
        const step2 = document.getElementById('step-2');
        const step3 = document.getElementById('step-3');
        const step4 = document.getElementById('step-4');
        const step5 = document.getElementById('step-5');
        const step6 = document.getElementById('step-6');

        // Get the containers
        const jobDescriptionContainer = document.getElementById('job-description-container');
        const wizardOverlay = document.getElementById('wizard-overlay');
        const geminiContentDiv = document.getElementById('gemini-content');
        const interviewPrepContentDiv = document.getElementById('interview-prep-content');

        // Get all the next/submit buttons
        const showWizardBtn = document.getElementById('show-wizard-btn');
        const closeWizardBtn = document.getElementById('close-wizard-btn');
        const next1Btn = document.getElementById('next-1');
        const next2Btn = document.getElementById('next-2');
        const next3YesBtn = document.getElementById('next-3-yes');
        const next3NoBtn = document.getElementById('next-3-no');
        const next4Btn = document.getElementById('next-4');
        const next5Btn = document.getElementById('next-5');
        const next6Btn = document.getElementById('next-6');
        const linkedinInput = document.getElementById('linkedin-url-input');

        // Message box elements
        const messageBox = document.getElementById('message-box');
        const messageText = document.getElementById('message-text');
        const closeMessageBtn = document.getElementById('close-message');

        const jobDescription = document.getElementById('job-description-text').textContent.trim();
        const resumeContent = `
            Johnathan Doe
            Sr. Product Manager
            Summary: Highly skilled product manager with over 7 years of experience in the tech industry. Proven ability to lead cross-functional teams, define product roadmaps, and drive successful product launches. Expertise in agile methodologies and a deep understanding of user-centric design.
            Experience:
            - Sr. Product Manager, Tech Solutions Inc. (2018 - Present)
                - Managed the entire product lifecycle for a suite of enterprise software.
                - Grew user engagement by 20% through feature prioritization and A/B testing.
            - Product Manager, Innovate Corp (2015 - 2018)
                - Led a team of engineers and designers to launch a new mobile application.
                - Conducted extensive market research to inform product strategy.
            Skills: Product Management, Agile, User Experience (UX), A/B Testing, Market Research, Leadership, Data Analysis.
        `;

        async function callGeminiAPI(systemPrompt, userQuery, targetElementId) {
            const targetElement = document.getElementById(targetElementId);
            targetElement.innerHTML = `<div class="loading-spinner"></div>`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
            };

            const apiKey = ""
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            try {
                let response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                const text = result?.candidates?.[0]?.content?.parts?.[0]?.text;

                if (text) {
                    targetElement.innerHTML = `<p class="text-sm text-gray-700 leading-relaxed">${text.replace(/\n/g, '<br>')}</p>`;
                } else {
                    targetElement.innerHTML = `<p class="text-sm text-red-500">Error: Could not generate content.</p>`;
                }
            } catch (error) {
                targetElement.innerHTML = `<p class="text-sm text-red-500">Error: API call failed.</p>`;
                console.error('API call failed:', error);
            }
        }

        function showStep(stepToShow) {
            const allSteps = [step1, step2, step3, step4, step5, step6];
            allSteps.forEach(step => step.classList.add('hidden'));
            stepToShow.classList.remove('hidden');
        }

        function showMessage(text) {
            messageText.textContent = text;
            messageBox.classList.remove('hidden');
            messageBox.classList.add('flex');
        }

        function showWizard() {
            jobDescriptionContainer.classList.add('hidden');
            wizardOverlay.classList.remove('hidden');
            wizardOverlay.classList.add('flex');
            showStep(step1);
        }

        function hideWizard() {
            wizardOverlay.classList.add('hidden');
            jobDescriptionContainer.classList.remove('hidden');
        }

        closeMessageBtn.addEventListener('click', () => {
            messageBox.classList.add('hidden');
        });

        closeWizardBtn.addEventListener('click', () => {
            hideWizard();
        });

        showWizardBtn.addEventListener('click', () => {
            showWizard();
        });

        // Step 1 event listener
        next1Btn.addEventListener('click', () => {
            const resumeFile = document.getElementById('resume-upload').files[0];
            if (!resumeFile) {
                showMessage('Please upload a resume to proceed.');
            } else {
                showStep(step2);

                // Call Gemini API for Compatibility Analysis
                const compatibilityPrompt = `Act as a senior technical recruiter. Analyze the following resume against the provided job description. Give a compatibility score out of 100, then briefly highlight 3 key strengths from the resume that match the job description.
Job Description:
${jobDescription}
Resume:
${resumeContent}`;
                callGeminiAPI(compatibilityPrompt, '', 'gemini-content');

                // Call Gemini API for Interview Prep
                const interviewPrompt = `Act as an expert career coach. Based on the following job description and resume, generate 3 specific and insightful interview questions that a hiring manager would likely ask. Format the questions as a numbered list.
Job Description:
${jobDescription}
Resume:
${resumeContent}`;
                callGeminiAPI(interviewPrompt, '', 'interview-prep-content');
            }
        });

        // Step 2 event listener
        next2Btn.addEventListener('click', () => {
            showStep(step3);
        });

        // Step 3 event listeners
        next3YesBtn.addEventListener('click', () => {
            showStep(step4);
        });

        next3NoBtn.addEventListener('click', () => {
            linkedinInput.classList.remove('hidden');
            linkedinInput.focus();
            next3NoBtn.textContent = 'Continue';
            next3NoBtn.removeEventListener('click', arguments.callee);
            next3NoBtn.addEventListener('click', () => {
                if (linkedinInput.value.trim() === '') {
                    showMessage('Please enter your LinkedIn URL.');
                } else {
                    showStep(step4);
                }
            });
        });

        // Step 4 event listener
        next4Btn.addEventListener('click', () => {
            const veteranAnswer = document.querySelector('input[name="veteran"]:checked');
            const protectedAnswer = document.querySelector('input[name="protected"]:checked');
            if (!veteranAnswer || !protectedAnswer) {
                showMessage('Please answer all mandatory questions to proceed.');
            } else {
                showStep(step5);
            }
        });

        // Step 5 event listener
        next5Btn.addEventListener('click', () => {
            showStep(step6);
        });

        // Step 6 event listener (final step)
        next6Btn.addEventListener('click', () => {
            showMessage('Application submitted successfully!');
            hideWizard();
        });

        // Initialize with the first step
        showWizard();
    </script>
</body>
</html>
